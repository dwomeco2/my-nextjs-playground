(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{2812:function(t,e,r){"use strict";r.d(e,{D:function(){return l}});var n=r(1527),o=r(959);let l=t=>{let e=e=>{let[r,l]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{l(!0)},[]),r)?(0,n.jsx)(t,{...e}):null};return e}},3030:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return T}});var n,o,l=r(1527),a=r(8793),i=r.n(a),c=r(4149),u=r(1014),s=r(2812),f=r(959);let d=t=>{let[e,r]=(0,f.useState)(t),n=(0,f.useRef)(void 0),o=(e,o)=>{if(!o){r(e);return}n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r(t)},o)};return(0,f.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[e]),[e,o]},v=(t,e,r)=>{let n=n=>{n.preventDefault(),t.forEach((t,o)=>{if(n.key===t){let t=e[o];t&&t(r)}})};(0,f.useEffect)(()=>(window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}),[r])};var p=r(4945);let m=p.z.object({row:p.z.number().max(3),col:p.z.number().max(3)}),h=p.z.object({id:p.z.string(),val:p.z.number().default(0),cor:m,prevCor:m.optional()}),w=p.z.array(h);(n=o||(o={}))[n.Left=1]="Left",n[n.Right=2]="Right",n[n.Up=3]="Up",n[n.Down=4]="Down";var x=r(7051),y=r(944),b=r(4477),g=r(6834),E=r(3341),N=r(7197),C=r(8612),_=r(4454);let j=(t,e,r)=>{let n=t.map(r),o=e.map(r);return JSON.stringify(n)===JSON.stringify(o)},M=t=>({row:Math.floor(t/4),col:t%4}),k=t=>{switch(t){case o.Left:return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];case o.Right:return[3,2,1,0,7,6,5,4,11,10,9,8,15,14,13,12];case o.Up:return[0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15];case o.Down:return[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3];default:throw Error("Unknown direction: ")}},D=(0,_.K)(!1),L=(0,b.cn)(t=>t(D)),S=(0,b.cn)(K());function U(t,e){return x.zG(e,k,y.UI(M),y.UI(e=>{let{row:r,col:n}=e;return t.find(t=>t.cor.row===r&&t.cor.col===n)}))}function z(t){for(let e=0;e<4;e++)for(let r=0;r<3;r++){let n=t[4*e+r],o=t[4*e+r+1];if(n&&o&&n.val===o.val)return o.val}return -1}let A=t=>{let e=!t.every(t=>0!==t.val),r=U(t,o.Left),n=U(t,o.Up),l=-1===z(r)&&-1===z(n);return!e&&l},I=t=>{let e=[],r=0,n=1;for(;r<3;){if(n>=4){n=++r+1;continue}let o=t[r],l=t[n];if(o&&l){if(o.val===l.val&&0!==o.val)l.prevCor=l.cor,l.cor=o.cor,l.val*=2,e.push(o.id),t[r]=l,t[n]={id:"tombstone",val:0,cor:l.prevCor},r++;else if(0===o.val&&0!==l.val)l.prevCor=l.cor,l.cor=o.cor,e.push(o.id),t[r]=l,t[n]={id:"tombstone",val:0,cor:l.prevCor};else if(o.val!==l.val&&0!==l.val){n=++r+1;continue}}n++}return t.forEach(t=>{"tombstone"===t.id&&(t.id=(0,N.x0)())}),e=e.filter(e=>!t.find(t=>t.id===e)),{merged:t,unmount:e}},R=t=>t.filter(t=>!t.every(t=>0===t.val)).filter(t=>{let e=t.filter(t=>0===t.val).length,r=function(t){let e=0;for(let r=t.length-1;r>=0;r--)if(0===t[r])e++;else break;return e}(t.map(t=>t.val)),n=z(t);return e!==r||n>0});function K(){let t=Array(16).fill(null);for(let e=0;e<16;e++){let r={val:0,cor:{row:Math.floor(e/4),col:e%4},id:(0,N.x0)()};t[e]=r}return t=O(t=w.parse(t)),t=O(t)}function O(t){var e;let r;do r=Math.floor(16*Math.random());while((null===(e=t[r])||void 0===e?void 0:e.val)!==0);return(0,C.K8)(t,r,"val",.9>=Math.random()?2:4),t}let G=["#392A1A","#473616","#7f410b","#8D3608","#912107","#A62507","#4E3E0A","#69530C","#715A0C","#EDC53F","#EEC12E"];function J(t){let{val:e}=t,[r,n]=d(e);return e&&!r?n(e):e!==r&&n(e,60),(0,l.jsx)("div",{className:"text-white",children:r})}function q(t){var e,r;let{cor:n,prevCor:o,children:a,style:i,className:u,...s}=t,d=function(t){let e=t=>window.matchMedia(t).matches,[r,n]=(0,f.useState)(e(t));function o(){n(e(t))}return(0,f.useEffect)(()=>{let e=window.matchMedia(t);return o(),e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}},[t]),r}("(min-width: 640px)"),v=t=>(d?8:4)+(d?118:76.75)*t,p=v(n.row),m=v(n.col),h=(0,c.q_)({from:{top:v(null!==(e=null==o?void 0:o.row)&&void 0!==e?e:n.row),left:v(null!==(r=null==o?void 0:o.col)&&void 0!==r?r:n.col)},to:{top:p,left:m},config:{tension:210,friction:22,precision:.01,mass:1}});return(0,l.jsx)(c.q.div,{className:"absolute flex h-[72.75px] w-[72.75px] select-none items-center justify-center border border-solid border-emerald-200 sm:h-[110px] sm:w-[110px] ".concat(u),style:{...i,...o?h:{top:"".concat(p,"px"),left:"".concat(m,"px")}},...s,children:a})}function F(t){let{isEnd:e,dispatch:r}=t,n=e?i()["end-toast"]:"";return(0,l.jsxs)("div",{className:"".concat(null!=n?n:""," absolute left-1/2 top-1/2 z-10 flex h-36 w-64 flex-col items-center justify-center gap-6 rounded-md bg-gray-300 bg-opacity-75 p-2 text-gray-800 shadow-md shadow-gray-800 "),children:[(0,l.jsx)("div",{className:"select-none font-bold",children:"End of game"}),(0,l.jsx)("button",{type:"button",className:"cbtn cbtn-primary cbtn-invert cursor-pointer font-medium",onClick:()=>{r({type:"restart"})},children:"Restart"})]})}var T=(0,s.D)(function(){let[t,e]=function(){let[,t]=(0,g.KO)(D);return(0,E.w4)(S,(e,r)=>{let n=function(t,e){if("arrowkey"===e.type){let{direction:r}=e.payload,n=y.wM(4)(U(t,r)),o=R(n).map(t=>{let e=t.map(C.I8);return e.forEach(t=>{t.prevCor&&(t.prevCor=void 0)}),I(e)}).flat();if(0===o.length)return t;let l=(0,C.I8)(t);return(o.forEach(t=>{let{merged:e,unmount:r}=t;e.forEach(t=>{let e=l.findIndex(e=>e.id===t.id);-1!==e?l[e]=t:l.push(t)}),r.forEach(t=>{l=l.filter(e=>e.id!==t)})}),j(t,l,t=>({id:t.id,val:t.val,cor:t.cor})))?t:(-1!==l.findIndex(t=>0===t.val)&&(l=O(l)),l)}if("restart"===e.type)return K();throw Error("Unknown action")}(e,r);return A(n)?t(!0):"restart"===r.type&&t(!1),n})}(),r=function(){let[t]=(0,g.KO)(L);return t}(),n=H(e);return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"px-4 py-2 text-center text-sm font-semibold text-white",children:"Canvas-less created in react & css animation"}),(0,l.jsx)("div",{...n,className:"relative mx-auto aspect-square w-[311px] rounded-md bg-slate-800 bg-opacity-50 p-1 sm:h-[480px] sm:w-[480px] sm:p-2",children:t.map(t=>{var e;let r=0!==t.val?String(t.val):"",n=0===Number(t.val)?"":G[Math.log2(Number(t.val))];return(0,l.jsx)(q,{className:"text-xl font-extrabold sm:text-4xl ".concat(null!==(e=i()["cell-animation"])&&void 0!==e?e:""," ").concat(0!==t.val?"z-10":"z-0"," "),style:{backgroundColor:"".concat(null!=n?n:"")},cor:t.cor,prevCor:t.prevCor,children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(J,{val:r})})},t.id)})}),r&&(0,l.jsx)(F,{isEnd:r,dispatch:e})]})});let H=t=>{v(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],[P(o.Right,t),P(o.Left,t),P(o.Up,t),P(o.Down,t)],[]);let e=(0,u.QS)({onSwipedRight:P(o.Right,t),onSwipedLeft:P(o.Left,t),onSwipedUp:P(o.Up,t),onSwipedDown:P(o.Down,t)});return e};function P(t,e){return()=>{e({type:"arrowkey",payload:{direction:t}})}}},4454:function(t,e,r){"use strict";r.d(e,{K:function(){return o}});var n=r(4477);let o=t=>{let e=(0,n.cn)(null!=t&&t,(t,r,n)=>{r(e,null!=n?n:!t(e))});return e}},8612:function(t,e,r){"use strict";r.d(e,{Fe:function(){return i},I8:function(){return c},Jo:function(){return o},K8:function(){return u},Sy:function(){return s},Vk:function(){return a}});var n=r(8392);function o(t,e,r){return"https://picsum.photos/seed/".concat(t,"/").concat(null!=e?e:2e3,"/").concat(null!=r?r:2e3)}let l=Date.now()^4294967296*Math.random(),a=n.ZP.xoroshiro128plus(l);function i(t,e){return n.ZP.unsafeUniformIntDistribution(t,e,a)}let c=t=>JSON.parse(JSON.stringify(t)),u=(t,e,r,n)=>{let o=t[e];o&&(o[r]=n)};function s(t){if(void 0===t)return"";let e=Date.now();return function(t,e){let r=Math.floor(t/1e3-e),n=r/31536e3;return n>1?"".concat(Math.floor(n)," years"):(n=r/2592e3)>1?"".concat(Math.floor(n)," months"):(n=r/86400)>1?"".concat(Math.floor(n)," days"):(n=r/3600)>1?"".concat(Math.floor(n)," hrs"):(n=r/60)>1?"".concat(Math.floor(n)," mins"):"".concat(Math.floor(r)," secs")}(e,t)}},8793:function(t){t.exports={"cell-animation":"Game2048_cell-animation__py7HL",mount:"Game2048_mount__nN5I_","end-toast":"Game2048_end-toast__LcH0F","end-toast-animation":"Game2048_end-toast-animation__9LuNy"}}}]);