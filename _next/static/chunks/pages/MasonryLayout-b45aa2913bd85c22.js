(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{5857:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/MasonryLayout",function(){return r(2841)}])},2812:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(1527),l=r(959);let i=e=>{let t=t=>{let[r,i]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{i(!0)},[]),r)?(0,n.jsx)(e,{...t}):null};return t}},2841:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(1527),l=r(8823),i=r.n(l),s=r(959);let o=()=>(0,n.jsx)("div",{className:"sticky top-0 z-20 h-12 w-full text-center text-lg font-bold leading-[3rem] text-white backdrop-blur",children:"Loading"});function c(e){let{addFiveImageAction:t,suffleImagesAction:r}=e;return(0,n.jsxs)("div",{className:"my-6 flex justify-center gap-x-4",children:[(0,n.jsx)("button",{type:"button",className:"cbtn cbtn-secondary",onClick:r,children:"Shuffle"}),(0,n.jsx)("button",{type:"button",className:"cbtn cbtn-primary",onClick:t,children:"Add 5"})]})}var a=r(6834),u=r(1689),f=r(2812);let d=e=>{let{onBottomCallback:t}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!r.current)return;let e=r.current,n=r=>{if(e&&!(e.scrollHeight<=e.clientHeight))for(let e of r)e.isIntersecting&&t()},l=new IntersectionObserver(n,{root:e,threshold:0});return null==l||l.observe(e.lastChild),()=>{null==l||l.unobserve(e.lastChild),null==l||l.disconnect()}},[t]),r};var m=r(7833);let h=e=>{let t=(0,u.useRouter)(),r="/MasonryLayout/images/".concat(e.id),l=e=>{let n=e.currentTarget,l=document.querySelector(".scroller");t.prefetch(r).then(()=>{"startViewTransition"in document?(n.style.zIndex="10",n.style.viewTransitionName="masonry-photo",l.style.viewTransitionName="masonry-frame",document.startViewTransition(async()=>{await t.push(r)})):t.push(r)})};return(0,s.useEffect)(()=>{t.prefetch(r)},[t,r]),(0,n.jsx)("div",{ref:e.innerRef,className:"relative mb-2 cursor-pointer",style:{height:"".concat(e.h,"px"),contain:"paint",objectFit:"cover",overflow:"clip",mixBlendMode:"normal"},onClick:l,children:(0,n.jsx)(i(),{src:e.src,alt:"masonry image",width:0,height:0,sizes:"100vw",style:{width:"100%",height:"".concat(e.h,"px"),objectFit:"cover",overflow:"clip"}})})};var v=(0,f.D)(function(){let[e,t]=(0,m.Z)(),[r,l,i]=t,u=(0,a.b9)(l),f=(0,a.b9)(i),v=(0,a.Dv)(e),p=(0,a.Dv)(r);!function(e){let[t,r]=(0,s.useState)();(0,s.useEffect)(()=>{let r=e.map(e=>{var t;return{ref:e.innerRef,br:null===(t=e.innerRef.current)||void 0===t?void 0:t.getBoundingClientRect()}});t&&r&&t.forEach(e=>{if(!e.br)return;let t=r.find(t=>t.ref.current===e.ref.current);if(t&&t.br){let r=t.ref.current,n=e.br.left-t.br.left,l=e.br.top-t.br.top;r&&(0!==n||0!==l)&&(r.style.transform="translate(".concat(n,"px, ").concat(l,"px)"),r.style.transition="transform 0s",requestAnimationFrame(()=>{r.style.transform="",r.style.transition="transform 500ms"}))}})},[e,t]),(0,s.useEffect)(()=>{if(e.every(e=>e.innerRef.current)){let t=e.map(e=>{var t;return{ref:e.innerRef,br:null===(t=e.innerRef.current)||void 0===t?void 0:t.getBoundingClientRect()}});r(t)}},[e])}(p);let b=d({onBottomCallback:u});return(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{addFiveImageAction:u,suffleImagesAction:f}),(0,n.jsxs)("div",{ref:b,className:"scroller no-scrollbar relative h-[40rem] w-full overflow-y-scroll rounded-md bg-gray-200 bg-opacity-10",children:[v&&(0,n.jsx)(o,{}),(0,n.jsx)("div",{className:"w-full columns-3 gap-2 gap-y-2 rounded-md p-6 hover:gap-y-8 sm:columns-4 ".concat(v?"mt-[-3rem]":""),children:p.map((e,t)=>(0,n.jsx)(h,{...e},t))}),(0,n.jsx)("div",{className:"flex h-[20px] w-full justify-center py-2 text-white",children:"Reached Bottom"})]})]})})}},function(e){e.O(0,[392,307,774,888,179],function(){return e(e.s=5857)}),_N_E=e.O()}]);